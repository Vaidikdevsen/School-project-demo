<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chinmaya Vidyalaya School Management System">
    <title>Chinmaya Vidyalaya</title>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700;800&family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" href="../vortex-logo.png"/>
    <style>
        /* ================================================================
           CHINMAYA VIDYALAYA - MEGA SCHOOL MANAGEMENT SYSTEM
           COMPLETE SINGLE-FILE VERSION (HTML + CSS + JS)
           ================================================================ */

        /* BASE RESET & SETUP */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        html, body { height: 100vh; width: 100vw; overflow: hidden; }

        /* CSS VARIABLES */
        :root {
            --primary: #667eea;
            --secondary: #764ba2;
            --tertiary: #f093fb;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --info: #3b82f6;
            --text-dark: #1f2937;
            --text-light: #6b7280;
            --bg-light: #f9fafb;
            --bg-dark: #0f172a;
            --border: #e5e7eb;
            --border-dark: #334155;
            --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            --transition-base: all 0.3s ease;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            line-height: 1.6;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            transition: var(--transition-base);
        }

        body.dark-theme {
            background: var(--bg-dark);
            color: #f1f5f9;
        }

        /* UTILITY CLASSES */
        .hidden { display: none !important; }
        .visible { display: block !important; }

        /* SCROLL PROGRESS BAR */
        .scroll-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--secondary), var(--tertiary));
            z-index: 100001;
            transition: width 0.1s linear;
            box-shadow: 0 2px 10px rgba(102, 126, 234, 0.5);
        }

        /* SCROLL TO TOP BUTTON */
        .scroll-to-top {
            position: fixed;
            bottom: 90px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            z-index: 99998;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            animation: bounce 2s infinite;
        }

        .scroll-to-top.visible { opacity: 1; visibility: visible; }

        .scroll-to-top:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* QUICK ACCESS MENU */
        .quick-access {
            position: fixed;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            z-index: 99997;
            display: flex;
            flex-direction: column;
            gap: 10px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .quick-access.visible { opacity: 1; visibility: visible; }

        .quick-btn {
            width: 45px;
            height: 45px;
            background: rgba(255, 255, 255, 0.95);
            border: 2px solid var(--border);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1rem;
            color: var(--primary);
        }

        body.dark-theme .quick-btn {
            background: rgba(30, 41, 59, 0.95);
            border-color: var(--border-dark);
        }

        .quick-btn:hover {
            transform: scale(1.15);
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* THEME TOGGLE BUTTON */
        .theme-toggle-container {
            position: fixed;
            bottom: 20px;
            left: 20px;
            z-index: 99999;
        }

        .theme-toggle-btn {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            color: white;
            font-size: 1.3rem;
        }

        .theme-toggle-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
        }

        /* YOUTUBE BUTTON */
        .youtube-button {
            position: fixed;
            right: 20px;
            bottom: 20px;
            width: 90px;
            height: 90px;
            background: linear-gradient(135deg, #FF0000, #CC0000);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 30px rgba(255, 0, 0, 0.4);
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            overflow: hidden;
            z-index: 99998;
            text-decoration: none;
            animation: youtube-pulse 2s infinite;
        }

        .youtube-icon {
            font-size: 1.8rem;
            color: white;
            transition: all 0.4s ease;
            z-index: 2;
        }

        .youtube-text {
            position: absolute;
            left: 70px;
            font-family: 'Poppins', sans-serif;
            font-weight: 800;
            font-size: 1.1rem;
            color: white;
            white-space: nowrap;
            opacity: 0;
            transform: translateX(-20px);
            transition: all 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        .youtube-button:hover {
            width: 200px;
            border-radius: 50px;
            box-shadow: 0 12px 40px rgba(255, 0, 0, 0.7);
        }

        .youtube-button:hover .youtube-text {
            opacity: 1;
            transform: translateX(0);
        }

        .youtube-button:active { transform: scale(0.95); }

        @keyframes youtube-pulse {
            0%, 100% { box-shadow: 0 8px 30px rgba(255, 0, 0, 0.4); }
            50% { box-shadow: 0 8px 35px rgba(255, 0, 0, 0.6), 0 0 0 10px rgba(255, 0, 0, 0.1); }
        }

        .youtube-button::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            transform: rotate(45deg);
            transition: all 0.6s ease;
            opacity: 0;
        }

        .youtube-button:hover::before {
            opacity: 1;
            top: -100%;
            right: -100%;
        }

        /* DARK THEME FIXES */
        body.dark-theme .card,
        body.dark-theme .stat-card,
        body.dark-theme .modal-content,
        body.dark-theme .toast {
            background: #1e293b;
            color: #f1f5f9;
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.1);
        }

        body.dark-theme .border { border-color: var(--border-dark); }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .youtube-button { left: 15px; bottom: 90px; width: 50px; height: 50px; }
            .youtube-button:hover { width: 170px; }
        }

        @media print {
            .theme-toggle-container, .scroll-to-top, .quick-access, .youtube-button,
            .btn-logout, .btn-change-password, .search-overlay, .shortcuts-overlay,
            .toast-container { display: none !important; }
            body { background: white !important; color: black !important; }
        }

        /* LOGIN PAGE */
        .login-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
        }

        .login-box {
            background: white;
            padding: 3rem 2.5rem;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 420px;
            text-align: center;
        }

        body.dark-theme .login-box {
            background: #1e293b;
            color: #f1f5f9;
        }

        .logo-3d { font-size: 5rem; margin-bottom: 1rem; color: var(--primary); }
        .school-name h1 { font-size: 2.2rem; margin-bottom: 0.5rem; }
        .school-name p { color: var(--text-light); }

        .user-type-selector {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 2rem 0;
        }

        .user-type-btn {
            padding: 0.8rem 1.5rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-type-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        body.dark-theme .user-type-btn {
            background: #334155;
            color: #f1f5f9;
        }

        .form-group {
            margin-bottom: 1.5rem;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-group input {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
            padding: 0.9rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1rem;
            width: 100%;
            transition: all 0.3s ease;
        }

        .btn-primary:hover { background: var(--secondary); }

        /* DASHBOARD & PAGES */
        .dashboard, .full-page {
            height: 100vh;
            overflow: hidden;
        }

        .dash-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            background: white;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        body.dark-theme .dash-header {
            background: #1e293b;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
        }

        .dash-content, .page-content {
            height: calc(100vh - 70px);
            overflow-y: auto;
            padding: 2rem;
        }

        .welcome-banner {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 2rem;
            border-radius: 15px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 1.5rem;
        }

        .menu-card {
            background: white;
            padding: 1.8rem;
            border-radius: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        body.dark-theme .menu-card {
            background: #1e293b;
        }

        .menu-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
        }

        .menu-card-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 15px;
            font-size: 2rem;
            color: white;
        }

        /* MODAL */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 100000;
            justify-content: center;
            align-items: center;
        }

        .modal.active { display: flex; }

        .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 20px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        body.dark-theme .modal-content {
            background: #1e293b;
            color: #f1f5f9;
        }

        /* TOAST */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100000;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .toast {
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 1rem;
            min-width: 300px;
            animation: slideInRight 0.3s ease-out;
            border-left: 4px solid var(--primary);
        }

        body.dark-theme .toast {
            background: #1e293b;
            color: #f1f5f9;
        }

        @keyframes slideInRight {
            from { transform: translateX(400px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* RESPONSIVE */
        @media (max-width: 768px) {
            .menu-grid { grid-template-columns: 1fr; }
            .dash-header { flex-direction: column; gap: 1rem; }
        }
    </style>
</head>
<body>
    <!-- SCROLL PROGRESS BAR -->
    <div class="scroll-progress" id="scrollProgress"></div>

    <!-- TOAST CONTAINER -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- SCROLL TO TOP BUTTON -->
    <button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()" aria-label="Scroll to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- QUICK ACCESS MENU -->
    <div class="quick-access" id="quickAccess">
        <button class="quick-btn" onclick="scrollToTop()" title="Scroll to Top">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button class="quick-btn" onclick="toggleTheme()" title="Toggle Theme">
            <i class="fas fa-adjust"></i>
        </button>
    </div>

    <!-- THEME TOGGLE -->
    <div class="theme-toggle-container">
        <button class="theme-toggle-btn" onclick="toggleTheme()" aria-label="Toggle Theme">
            <i class="fas fa-moon theme-icon"></i>
        </button>
    </div>

    <!-- YOUTUBE BUTTON -->
    <a href="https://www.youtube.com/@chinmayavidyalayabokaro9965" target="_blank" class="youtube-button">
        <i class="fab fa-youtube youtube-icon"></i>
        <span class="youtube-text">YOUTUBE</span>
    </a>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div style="text-align: center;">
                <div class="logo-3d">
                    <div class="om-symbol">ॐ</div>
                </div>
                <div class="school-name">
                    <h1>Chinmaya Vidyalaya</h1>
                    <p>Bokaro Steel City</p>
                </div>
            </div>

            <div class="user-type-selector">
                <button class="user-type-btn active" onclick="selectUserType('student')">Student</button>
                <button class="user-type-btn" onclick="selectUserType('teacher')">Teacher</button>
            </div>

            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label>User ID</label>
                    <input type="text" id="userId" placeholder="e.g. 3A001 or T001" required>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Enter password" required>
                </div>
                <button type="submit" class="btn btn-primary">Login</button>
            </form>

            <div id="loginAlert" class="hidden" style="margin-top: 1rem; color: #ef4444;"></div>
        </div>
    </div>

    <!-- STUDENT DASHBOARD -->
    <div id="studentDashboard" class="dashboard hidden">
        <div class="dash-header">
            <h1>Student Portal</h1>
            <div>
                <span id="studentName"></span>
                <button onclick="logout()">Logout</button>
            </div>
        </div>
        <div class="dash-content">
            <h2>Welcome, <span id="studentWelcome"></span>!</h2>
            <!-- Add your menu cards here -->
            <div class="menu-grid">
                <div class="menu-card" onclick="alert('Assignments page')">Assignments</div>
                <div class="menu-card" onclick="alert('Attendance')">Attendance</div>
                <!-- ... other cards ... -->
            </div>
        </div>
    </div>

    <!-- TEACHER DASHBOARD -->
    <div id="teacherDashboard" class="dashboard hidden">
        <div class="dash-header">
            <h1>Teacher Portal</h1>
            <div>
                <span id="teacherName"></span>
                <button onclick="logout()">Logout</button>
            </div>
        </div>
        <div class="dash-content">
            <h2>Welcome, <span id="teacherWelcome"></span>!</h2>
            <!-- Teacher menu cards -->
        </div>
    </div>

    <!-- CHANGE PASSWORD MODAL -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <h2>Change Password</h2>
            <form onsubmit="handleChangePassword(event)">
                <input type="password" id="currentPassword" placeholder="Current Password" required>
                <input type="password" id="newPassword" placeholder="New Password" req            </div>
            <div class="shortcut-item">
                <span><i class="fas fa-adjust"></i> Toggle Theme</span>
                <span class="shortcut-key">Ctrl + Shift + T</span>
            </div>
            <div class="shortcut-item">
                <span><i class="fas fa-sign-out-alt"></i> Logout</span>
                <span class="shortcut-key">Ctrl + L</span>
            </div>
            <div class="shortcut-item">
                <span><i class="fas fa-print"></i> Print Page</span>
                <span class="shortcut-key">Ctrl + P</span>
            </div>
            <div class="shortcut-item">
                <span><i class="fas fa-times"></i> Close Overlays</span>
                <span class="shortcut-key">Escape</span>
            </div>
            <button class="btn btn-primary" style="margin-top: 1.5rem; width: 100%;" onclick="closeShortcuts()">
                <i class="fas fa-check"></i> Got it!
            </button>
        </div>
    </div>

    <!-- SCROLL TO TOP BUTTON -->
    <button class="scroll-to-top" id="scrollToTop" onclick="scrollToTop()" aria-label="Scroll to Top">
        <i class="fas fa-arrow-up"></i>
    </button>

    <!-- QUICK ACCESS MENU -->
    <div class="quick-access" id="quickAccess">
        <button class="quick-btn" onclick="scrollToTop()" title="Scroll to Top">
            <i class="fas fa-arrow-up"></i>
        </button>
        <button class="quick-btn" onclick="toggleTheme()" title="Toggle Theme">
            <i class="fas fa-adjust"></i>
        </button>
    </div>

    <!-- SINGLE THEME TOGGLE BUTTON -->
    <div class="theme-toggle-container">
        <button class="theme-toggle-btn" onclick="toggleTheme()" title="Toggle Theme" aria-label="Toggle Theme">
            <i class="fas fa-moon theme-icon"></i>
        </button>
    </div>

    <!-- YOUTUBE BUTTON -->
    <a href="https://www.youtube.com/@chinmayavidyalayabokaro9965" 
       target="_blank" 
       class="youtube-button" 
       title="Visit Chinmaya Vidyalaya Bokaro YouTube Channel">
        <i class="fab fa-youtube youtube-icon"></i>
        <span class="youtube-text">YOUTUBE</span>
    </a>

    <!-- LOGIN PAGE -->
    <div id="loginPage" class="login-container">
        <div class="login-box">
            <div style="text-align: center;">
                <div class="logo-3d">
                    <div class="om-symbol">
                        <div class="om-inner">ॐ</div>
                    </div>
                </div>
                <div class="school-name">
                    <h1>Chinmaya Vidyalaya</h1>
                    <p>Bokaro Steel City</p>
                </div>
            </div>
            
            <div class="user-type-selector">
                <button class="user-type-btn active" onclick="selectUserType('student')">
                    <i class="fas fa-user-graduate"></i>
                    <span>Student</span>
                </button>
                <button class="user-type-btn" onclick="selectUserType('teacher')">
                    <i class="fas fa-chalkboard-teacher"></i>
                    <span>Teacher</span>
                </button>
            </div>
            
            <form onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label><i class="fas fa-id-card"></i> User ID</label>
                    <input type="text" id="userId" placeholder="Enter ID (e.g., 3A001 or T001)" required autocomplete="username" pattern="[0-9A-G]{4,5}">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-lock"></i> Password</label>
                    <input type="password" id="password" placeholder="Enter password" required autocomplete="current-password" minlength="6">
                </div>
                <button type="submit" class="btn btn-primary">
                    <i class="fas fa-sign-in-alt"></i> Login
                </button>
            </form>
            
            <div id="loginAlert" class="hidden"></div>
            
            <div style="margin-top: 1.5rem; text-align: center; font-size: 0.8rem; color: var(--text-light);">
                <p><strong>Quick Login:</strong></p>
                <p>Student: Any ID like 3A001 (password same as ID)</p>
                <p>Teacher: T001 / teacher123</p>
            </div>
        </div>
    </div>

    <!-- STUDENT DASHBOARD -->
    <div id="studentDashboard" class="dashboard hidden">
        <div class="dash-header">
            <div>
                <h1><i class="fas fa-graduation-cap"></i> Student Portal</h1>
                <p id="studentWelcome" style="opacity: 0.95; margin-top: 0.2rem; font-size: 0.85rem;">Welcome!</p>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="studentAvatar" title="Click for profile" onclick="openPage('profile')">S</div>
                <div style="margin-right: 0.6rem;">
                    <div id="studentName" style="font-weight: 800; font-size: 0.9rem;">Student</div>
                    <div id="studentClass" style="font-size: 0.75rem; opacity: 0.9;">Class</div>
                </div>
                <button class="btn-change-password" onclick="openChangePassword()">
                    <i class="fas fa-key"></i> Pass
                </button>
                <button class="btn-logout" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <div class="dash-content">
            <div class="welcome-banner">
                <h2><i class="fas fa-rocket"></i> Welcome to Student Portal</h2>
                <p style="font-size: 0.95rem;">
                    <i class="fas fa-users"></i> 2800 Students | 
                    <i class="fas fa-chalkboard"></i> Classes 3-9 | 
                    <i class="fas fa-check-circle"></i> Complete Management
                </p>
            </div>
            
            <div class="menu-grid">
                <div class="menu-card" onclick="openPage('assignments')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3>Assignments</h3>
                    <p>MCQ Tests & Quizzes</p>
                </div>
                
                <div class="menu-card" onclick="openPage('attendance')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <h3>Attendance</h3>
                    <p>Track your record</p>
                </div>
                
                <div class="menu-card" onclick="openPage('timetable')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>Timetable</h3>
                    <p>Weekly schedule</p>
                </div>
                
                <div class="menu-card" onclick="openPage('results')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>Results</h3>
                    <p>View marks & grades</p>
                </div>
                
                <div class="menu-card" onclick="openPage('studyMaterials')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                        <i class="fas fa-book-open"></i>
                    </div>
                    <h3>Study Materials</h3>
                    <p>Resources & notes</p>
                </div>
                
                <div class="menu-card" onclick="openPage('homework')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #30cfd0, #330867);">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h3>Homework</h3>
                    <p>Daily assignments</p>
                </div>
                
                <div class="menu-card" onclick="openPage('feePayment')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                        <i class="fas fa-rupee-sign"></i>
                    </div>
                    <h3>Fee Payment</h3>
                    <p>Pay online</p>
                </div>
                
                <div class="menu-card" onclick="openPage('library')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
                        <i class="fas fa-book"></i>
                    </div>
                    <h3>Library</h3>
                    <p>E-Books & catalog</p>
                </div>
                
                <div class="menu-card" onclick="openPage('events')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #fbc2eb, #a6c1ee);">
                        <i class="fas fa-calendar-alt"></i>
                    </div>
                    <h3>Events</h3>
                    <p>School activities</p>
                </div>
                
                <div class="menu-card" onclick="openPage('announcements')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #fdcbf1, #e6dee9);">
                        <i class="fas fa-bullhorn"></i>
                    </div>
                    <h3>Announcements</h3>
                    <p>Latest updates</p>
                </div>
                
                <div class="menu-card" onclick="openPage('certificates')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #ffecd2, #fcb69f);">
                        <i class="fas fa-certificate"></i>
                    </div>
                    <h3>Certificates</h3>
                    <p>Achievements</p>
                </div>
                
                <div class="menu-card" onclick="openPage('profile')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #ff9a56, #ff7676);">
                        <i class="fas fa-user"></i>
                    </div>
                    <h3>My Profile</h3>
                    <p>Personal details</p>
                </div>
            </div>
        </div>
    </div>

    <!-- TEACHER DASHBOARD -->
    <div id="teacherDashboard" class="dashboard hidden">
        <div class="dash-header">
            <div>
                <h1><i class="fas fa-chalkboard-teacher"></i> Teacher Portal</h1>
                <p id="teacherWelcome" style="opacity: 0.95; margin-top: 0.2rem; font-size: 0.85rem;">Welcome!</p>
            </div>
            <div class="user-info">
                <div class="user-avatar" id="teacherAvatar" title="Click for profile" onclick="openPage('teacherProfile')">T</div>
                <div style="margin-right: 0.6rem;">
                    <div id="teacherName" style="font-weight: 800; font-size: 0.9rem;">Teacher</div>
                    <div id="teacherSubject" style="font-size: 0.75rem; opacity: 0.9;">Subject</div>
                </div>
                <button class="btn-change-password" onclick="openChangePassword()">
                    <i class="fas fa-key"></i> Pass
                </button>
                <button class="btn-logout" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>
        
        <div class="dash-content">
            <div class="welcome-banner">
                <h2><i class="fas fa-user-tie"></i> Teacher Dashboard</h2>
                <p style="font-size: 0.95rem;">
                    <i class="fas fa-users"></i> Manage 2800 Students | 
                    <i class="fas fa-cogs"></i> Complete Control | 
                    <i class="fas fa-graduation-cap"></i> All Features
                </p>
            </div>
            
            <div class="menu-grid">
                <div class="menu-card" onclick="openPage('myTimetable')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #667eea, #764ba2);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>My Timetable</h3>
                    <p>Teaching schedule</p>
                </div>
                
                <div class="menu-card" onclick="openPage('markAttendance')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #43e97b, #38f9d7);">
                        <i class="fas fa-user-check"></i>
                    </div>
                    <h3>Mark Attendance</h3>
                    <p>Daily attendance</p>
                </div>
                
                <div class="menu-card" onclick="openPage('createAssignment')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #4facfe, #00f2fe);">
                        <i class="fas fa-plus-circle"></i>
                    </div>
                    <h3>Create Assignment</h3>
                    <p>MCQ tests</p>
                </div>
                
                <div class="menu-card" onclick="openPage('enterMarks')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #fa709a, #fee140);">
                        <i class="fas fa-edit"></i>
                    </div>
                    <h3>Enter Marks</h3>
                    <p>Exam results</p>
                </div>
                
                <div class="menu-card" onclick="openPage('uploadMaterials')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #f093fb, #f5576c);">
                        <i class="fas fa-upload"></i>
                    </div>
                    <h3>Upload Materials</h3>
                    <p>Study resources</p>
                </div>
                
                <div class="menu-card" onclick="openPage('assignHomework')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #30cfd0, #330867);">
                        <i class="fas fa-clipboard-list"></i>
                    </div>
                    <h3>Assign Homework</h3>
                    <p>Daily tasks</p>
                </div>
                
                <div class="menu-card" onclick="openPage('viewReports')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                        <i class="fas fa-chart-bar"></i>
                    </div>
                    <h3>View Reports</h3>
                    <p>Analytics</p>
                </div>
                
                <div class="menu-card" onclick="openPage('teacherProfile')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #ff9a9e, #fecfef);">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <h3>My Profile</h3>
                    <p>Personal info</p>
                </div>
                
                <div class="menu-card" onclick="openPage('importStudents')">
                    <div class="menu-card-icon" style="background: linear-gradient(135deg, #a78bfa, #c084fc);">
                        <i class="fas fa-file-import"></i>
                    </div>
                    <h3>Import Students</h3>
                    <p>Upload student data</p>
                </div>
            </div>
        </div>
    </div>

    <!-- ALL PAGE CONTAINERS -->
    <div id="myTimetablePage" class="full-page"></div>
    <div id="markAttendancePage" class="full-page"></div>
    <div id="timetablePage" class="full-page"></div>
    <div id="assignmentsPage" class="full-page"></div>
    <div id="createAssignmentPage" class="full-page"></div>
    <div id="attendancePage" class="full-page"></div>
    <div id="resultsPage" class="full-page"></div>
    <div id="studyMaterialsPage" class="full-page"></div>
    <div id="homeworkPage" class="full-page"></div>
    <div id="feePaymentPage" class="full-page"></div>
    <div id="libraryPage" class="full-page"></div>
    <div id="uploadMaterialsPage" class="full-page"></div>
    <div id="assignHomeworkPage" class="full-page"></div>
    <div id="enterMarksPage" class="full-page"></div>
    <div id="eventsPage" class="full-page"></div>
    <div id="announcementsPage" class="full-page"></div>
    <div id="certificatesPage" class="full-page"></div>
    <div id="profilePage" class="full-page"></div>
    <div id="viewReportsPage" class="full-page"></div>
    <div id="teacherProfilePage" class="full-page"></div>
    <div id="importStudentsPage" class="full-page"></div>

    <!-- CHANGE PASSWORD MODAL -->
    <div id="changePasswordModal" class="modal">
        <div class="modal-content">
            <h2 style="margin-bottom: 1.3rem;">
                <i class="fas fa-key"></i> Change Password
            </h2>
            <form onsubmit="handleChangePassword(event)">
                <div class="form-group">
                    <label>Current Password</label>
                    <input type="password" id="currentPassword" required autocomplete="current-password" minlength="6">
                </div>
                <div class="form-group">
                    <label>New Password</label>
                    <input type="password" id="newPassword" required minlength="6" autocomplete="new-password">
                </div>
                <div class="form-group">
                    <label>Confirm New Password</label>
                    <input type="password" id="confirmPassword" required autocomplete="new-password">
                </div>
                <div style="display: flex; gap: 0.7rem;">
                    <button type="submit" class="btn btn-primary" styl
